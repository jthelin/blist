PROJECT(blist)

CMAKE_MINIMUM_REQUIRED(VERSION 3.12)
SET(CMAKE_CXX_STANDARD 14)

FILE(GLOB lib_SRCS CONFIGURE_DEPENDS "libsrc/*.cc")

FILE(GLOB lib_HDRS CONFIGURE_DEPENDS "libsrc/*.h")

SET(blist_SRCS main.cc blist.cc blist.h)

ADD_LIBRARY(mylib STATIC ${lib_HDRS} ${lib_SRCS})
ADD_EXECUTABLE(blist ${blist_SRCS} ${lib_HDRS} ${lib_SRCS})

ENABLE_TESTING()

ADD_TEST(blist_exe blist ../blist.h)

INSTALL(TARGETS blist RUNTIME DESTINATION bin)
